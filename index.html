Claro, aquí tienes el código completo actualizado, que:
	•	Usa Firebase Realtime Database con la URL correcta.
	•	Permite guardar, mostrar, editar y eliminar publicaciones y comentarios.
	•	Permite subir imágenes en las publicaciones.
	•	Muestra fecha y hora de cada publicación y comentario.
	•	Incluye sección de materias con texto expandible/cerrable.
	•	Tiene una interfaz mejorada y funcional.

⸻


<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>EduConnect - Comunidad de Aprendizaje</title>
<style>
  body {
    font-family: Arial, sans-serif;
    margin: 0; padding: 0;
    background-color: #f4f4f4;
  }
  header {
    background: #0073e6; color: white;
    padding: 20px; text-align: center;
  }
  nav {
    background: #005bb5;
    padding: 10px; text-align: center;
  }
  nav ul {
    list-style: none; padding: 0; margin: 0;
  }
  nav ul li {
    display: inline; margin: 0 15px;
  }
  nav ul li a {
    color: white; font-weight: bold; text-decoration: none;
  }
  section {
    background: white;
    margin: 20px auto;
    padding: 20px;
    max-width: 900px;
    border-radius: 10px;
    box-shadow: 0 0 8px rgba(0,0,0,0.1);
  }
  .materia {
    background: #ddd;
    margin-bottom: 10px;
    border-radius: 6px;
  }
  .materia > h3 {
    margin: 0;
    padding: 10px;
    cursor: pointer;
    user-select: none;
  }
  .materia .contenido-materia {
    padding: 0 10px 10px 10px;
    display: none;
    font-size: 0.95em;
    line-height: 1.3em;
  }
  form {
    display: flex; flex-direction: column;
  }
  input, textarea, button {
    margin: 8px 0; padding: 10px;
    font-size: 1em;
    border: 1px solid #ccc;
    border-radius: 6px;
    resize: vertical;
  }
  button {
    background: #0073e6;
    color: white;
    border: none;
    cursor: pointer;
    font-weight: bold;
  }
  button:hover {
    background: #005bb5;
  }
  .publicacion, .comentario {
    border-bottom: 1px solid #ccc;
    padding: 12px 0;
    position: relative;
  }
  .publicacion img {
    max-width: 100%;
    max-height: 200px;
    margin-top: 8px;
    border-radius: 6px;
  }
  .fecha {
    font-size: 0.8em;
    color: #666;
    margin-top: 4px;
  }
  .btn-editar, .btn-eliminar {
    cursor: pointer;
    background: #0073e6;
    border: none;
    color: white;
    font-size: 0.8em;
    padding: 4px 8px;
    border-radius: 4px;
    margin-left: 6px;
  }
  .btn-eliminar {
    background: #d9534f;
  }
  .btn-editar:hover {
    background: #005bb5;
  }
  .btn-eliminar:hover {
    background: #c9302c;
  }
  .acciones {
    position: absolute;
    top: 10px;
    right: 0;
  }
  #imagenPublicacion {
    padding: 3px;
  }
</style>
</head>
<body>

<header>
  <h1>EduConnect</h1>
  <p>Una comunidad educativa para estudiantes de primaria hasta universidad</p>
</header>

<nav>
  <ul>
    <li><a href="#inicio">Inicio</a></li>
    <li><a href="#materias">Materias</a></li>
    <li><a href="#publicaciones">Publicaciones</a></li>
    <li><a href="#comentarios">Comentarios</a></li>
  </ul>
</nav>

<section id="inicio">
  <h2>Bienvenidos a EduConnect</h2>
  <p>Un espacio para compartir conocimientos y colaborar en distintas materias.</p>
</section>

<section id="materias">
  <h2>Materias</h2>
  
  <div class="materia">
    <h3>Matemáticas</h3>
    <div class="contenido-materia">
      <p>Las matemáticas son fundamentales para desarrollar el pensamiento lógico y resolver problemas. Desde álgebra y cálculo hasta geometría, esta materia nos ayuda a comprender patrones y relaciones en el mundo.</p>
    </div>
  </div>

  <div class="materia">
    <h3>Ciencias</h3>
    <div class="contenido-materia">
      <p>La ciencia nos permite explorar el universo y entender la naturaleza. Biología, química y física nos ofrecen herramientas para estudiar la vida, la materia y las fuerzas que gobiernan el mundo.</p>
    </div>
  </div>

  <div class="materia">
    <h3>Historia</h3>
    <div class="contenido-materia">
      <p>La historia nos conecta con nuestro pasado y nos enseña las lecciones de generaciones anteriores. Conocer los eventos históricos nos ayuda a entender la sociedad y su evolución.</p>
    </div>
  </div>
</section>

<section id="publicaciones">
  <h2>Publica tu contenido</h2>
  <form id="formPublicacion">
    <input type="text" id="titulo" placeholder="Título" required />
    <textarea id="contenido" placeholder="Escribe tu publicación aquí..." required></textarea>
    <input type="file" id="imagenPublicacion" accept="image/*" />
    <button type="submit">Publicar</button>
  </form>
  <div id="listaPublicaciones"></div>
</section>

<section id="comentarios">
  <h2>Comentarios</h2>
  <form id="formComentario">
    <input type="text" id="nombre" placeholder="Tu nombre" required />
    <textarea id="comentario" placeholder="Escribe tu comentario aquí..." required></textarea>
    <button type="submit">Comentar</button>
  </form>
  <div id="listaComentarios"></div>
</section>

<footer>
  <p>&copy; 2025 EduConnect - Comunidad de Aprendizaje</p>
</footer>

<script type="module">
// Importa Firebase y funciones necesarias
import { initializeApp } from "https://www.gstatic.com/firebasejs/11.8.0/firebase-app.js";
import { getDatabase, ref, push, onValue, remove, update } from "https://www.gstatic.com/firebasejs/11.8.0/firebase-database.js";
import { getStorage, ref as sRef, uploadBytes, getDownloadURL } from "https://www.gstatic.com/firebasejs/11.8.0/firebase-storage.js";

const firebaseConfig = {
  apiKey: "AIzaSyBBOQ3Juovb9-m8HCLghqF5DlR5LgBMYY0",
  authDomain: "educonnect-a492f.firebaseapp.com",
  databaseURL: "https://educonnect-a492f-default-rtdb.firebaseio.com",
  projectId: "educonnect-a492f",
  storageBucket: "educonnect-a492f.appspot.com",
  messagingSenderId: "1086853453106",
  appId: "1:1086853453106:web:51262a98664e59724fb32b",
  measurementId: "G-VQQS2PFRXB"
};

// Inicializa Firebase
const app = initializeApp(firebaseConfig);
const db = getDatabase(app);
const storage = getStorage(app);

// --- Helpers ---

function formatearFecha(timestamp) {
  const date = new Date(timestamp);
  return date.toLocaleString("es-ES", { dateStyle: "short", timeStyle: "short" });
}

function crearElementoPublicacion(id, data) {
  const div = document.createElement("div");
  div.classList.add("publicacion");
  div.dataset.id = id;

  const fechaTexto = formatearFecha(data.fecha);

  div.innerHTML = `
    <h3 contenteditable="false" class="titulo">${data.titulo}</h3>
    <p contenteditable="false" class="contenido">${data.contenido}</p>
    ${data.imagen ? `<img src="${data.imagen}" alt="Imagen publicación" />` : ""}
    <div class="fecha">Publicado: ${fechaTexto}</div>
    <div class="acciones">
      <button class="btn-editar">Editar</button>
      <button class="btn-eliminar">Eliminar</button>
    </div>
  `;
  return div;
}

function crearElementoComentario(id, data) {
  const div = document.createElement("div");
  div.classList.add("comentario");
  div.dataset.id = id;

  const fechaTexto = formatearFecha(data.fecha);

  div.innerHTML = `
    <strong contenteditable="false" class="nombre">${data.nombre}</strong>:
    <p contenteditable="false" class="comentario-texto">${data.comentario}</p>
    <div class="fecha">Comentado: ${fechaTexto}</div>
    <div class="acciones">
      <button class="btn-editar">Editar</button>
      <button class="btn-eliminar">Eliminar</button>
    </div>
  `;
  return div;
}

// --- Variables de DOM ---
const listaPublicaciones = document.getElementById("listaPublicaciones");
const listaComentarios = document.getElementById("listaComentarios");
const formPublicacion = document.getElementById("formPublicacion");
const formComentario = document.getElementById("formComentario");
const inputImagen = document.getElementById("imagenPublicacion");

// --- Funciones de carga y renderizado ---

function cargarPublicaciones() {
  const publicacionesRef = ref(db, "publicaciones");
  onValue(publicacionesRef, (snapshot) => {
    listaPublicaciones.innerHTML = "";
    snapshot.for
